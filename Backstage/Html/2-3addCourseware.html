<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="icon" href="../../Public/Images/sclm.ico" type="image/x-icon"/>
    <link rel="stylesheet" type="text/css" href="../../Public/Css/base.css" />
    <link rel="stylesheet" type="text/css" href="../Css/common.css" />
    <link rel="stylesheet" type="text/css" href="../Css/zTreeStyle.css" />
    <link rel="stylesheet" type="text/css" href="../Css/creatCourse.css" />
    <title>北京市经管文法实验实践教学众创联盟在线云平台</title>
</head>
<body>
    <div id="mg_header">
        <div class="wrap">
            <div class="logo">
                <a href="1-1index.html">北京林业大学经济管理实验实践教学云平台</a>
                <span>
                    欢迎登录平台！
                    <a href="javascript:void(0);">张宪义</a>
                </span>
            </div>
            <ul class="mainNav">
                <li><a href="javascript:void(0);">首页</a></li>
                <li><a href="javascript:void(0);">用户</a></li>
                <li class="on"><a href="javascript:void(0);">课程</a></li>
                <li><a href="javascript:void(0);">资讯</a></li>
                <li><a href="javascript:void(0);">文章</a></li>
                <li><a href="javascript:void(0);">系统</a></li>
            </ul>
        </div>
    </div>
    <div id="mg_content" class="wrap courseware">
        <div class="location">
            <a href="javascript:void(0);">课程管理</a> >
            <a href="javascript:void(0);">会计基础学</a> > 添加课件
        </div>
        <div class="c_left">
            <ul id="catalog" class="ztree"></ul>
        </div>
        <div class="c_right mainContent">
            <form class="creatCourse" action="javascript:void(0);" method="post" enctype="multipart/form-data">
                <h3 class="title">添加课件</h3>
                <ul class="f_list">
                    <li>
                        <span class="f_tag h30">实验目的要求：</span>
                        <textarea class="w500 h70"></textarea>
                    </li>
                    <li>
                        <span class="f_tag h30">实验仪器和材料：</span>
                        <textarea class="w500 h70"></textarea>
                    </li>
                    <li>
                        <span class="f_tag h30">试验方法和器材：</span>
                        <textarea class="w500 h100"></textarea>
                    </li>
                    <li>
                        <span class="f_tag h30">实验教材：</span>
                        <div class="fileBtn">
                            <input type="file" />
                            <span class="btn">上传教材</span>
                            <label>未选择文件...</label>
                        </div>
                    </li>
                    <li>
                        <span class="f_tag h30">实验课件：</span>
                        <div class="fileBtn">
                            <input type="file" data-name="mp4 flv" />
                            <span class="btn">上传视频</span>
                            <label>未选择文件...</label>
                        </div>
                        <div class="fileBtn m_t20">
                            <input type="file" data-name="doc docx" />
                            <span class="btn">上传WORD</span>
                            <label>未选择文件...</label>
                        </div>
                        <div class="fileBtn m_t20">
                            <input type="file" data-name="ppt pptx" />
                            <span class="btn">上传PPT</span>
                            <label>未选择文件...</label>
                        </div>
                    </li>
                    <li>
                        <input class="btn save" type="submit" value="保存" name="mySave" />
                        <input class="btn cancle" type="button" value="取消" name="myCancle" />
                    </li>
                </ul>
            </form>
        </div>
    </div>
    <div id="mg_footer"></div>
</body>
<script type="text/javascript" src="../../Public/Js/jquery.js"></script>
<script type="text/javascript" src="../Js/jquery.ztree.core-3.5.min.js"></script>
<script type="text/javascript">
    var fileValidate = {
        filevalidate: function(obj,o,correctFunc,errorFunc) {
            if(obj.data("name")) {
                var tags = obj.data("name").split(" ");
                var name = o.files[0].name;
                var type = name.slice(name.lastIndexOf(".") + 1);
                for(var i = 0; i < tags.length; i++) {
                    if(tags[i] == type) {
                        if(typeof correctFunc == "function") correctFunc();
                        return;
                    }
                    if(i == tags.length - 1) {
                        obj.val("");
                        if(typeof errorFunc == "function") errorFunc();
                    }
                }
            }
        }
    };
    var setting = {
        view: {
            showIcon: showIconForTree
        },
        data: {
            simpleData: {
                enable: true
            }
        }
    };

    var zNodes =[
        { id:1, pId:0, name:"目录", open:true},
        { id:11, pId:1, name:"会计记账方法", open:true},
        { id:111, pId:11, name:"会计记账方法的种类会计记账方法的种类"},
        { id:112, pId:11, name:"借贷记账法"},
        { id:12, pId:1, name:"会计科目与账户", open:true},
        { id:121, pId:12, name:"会计科目"},
        { id:122, pId:12, name:"账户"},
        { id:13, pId:1, name:"借贷记账法下主要经", isParent:true},
        { id:2, pId:1, name:"会计凭证", isParent:true},
        { id:21, pId:1, name:"会计账簿", isParent:true},
    ];

    function showIconForTree(treeId, treeNode) {
        return !treeNode.isParent;
    };

    $(function() {
        $(".fileBtn input").change(function() {
            var obj = $(this);
            fileValidate.filevalidate(obj,this,function() {
                obj.siblings("label").html(obj.val());
            },function() {
                obj.siblings("label").html("上传格式错误！");
            });
        });

        $.fn.zTree.init($("#catalog"), setting, zNodes);
    });
</script>
</html>